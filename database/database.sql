-- Table: public.genres

-- DROP TABLE IF EXISTS public.genres;

CREATE TABLE IF NOT EXISTS public.genres
(
    id_genre integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 14 MINVALUE 1 MAXVALUE 2147483647 CACHE 14 ),
    genre_name character varying(100) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT genres_pkey PRIMARY KEY (id_genre)
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.genres
    OWNER to docker;

INSERT INTO public.genres (id_genre, genre_name) VALUES (9, 'Thriller');
INSERT INTO public.genres (id_genre, genre_name) VALUES (7, 'Powieść');
INSERT INTO public.genres (id_genre, genre_name) VALUES (5, 'Epos');
INSERT INTO public.genres (id_genre, genre_name) VALUES (8, 'Dramat poetycki');
INSERT INTO public.genres (id_genre, genre_name) VALUES (1, 'Powieść obyczajowa');
INSERT INTO public.genres (id_genre, genre_name) VALUES (4, 'Tragedia');
INSERT INTO public.genres (id_genre, genre_name) VALUES (2, 'Powieść epistolarna');
INSERT INTO public.genres (id_genre, genre_name) VALUES (6, 'Powieść społeczno-obyczajowa');
INSERT INTO public.genres (id_genre, genre_name) VALUES (3, 'Dramat romantyczny');
INSERT INTO public.genres (id_genre, genre_name) VALUES (10, 'Fantasy');
INSERT INTO public.genres (id_genre, genre_name) VALUES (11, 'Baśń');
INSERT INTO public.genres (id_genre, genre_name) VALUES (12, 'Powieść');
INSERT INTO public.genres (id_genre, genre_name) VALUES (13, 'Dystopia');

-- Table: public.publishers

-- DROP TABLE IF EXISTS public.publishers;

CREATE TABLE IF NOT EXISTS public.publishers
(
    id_publisher integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 15 MINVALUE 1 MAXVALUE 2147483647 CACHE 15 ),
    publisher_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT publishers_pkey PRIMARY KEY (id_publisher)
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.publishers
    OWNER to docker;

INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (1, 'Wydawnictwo Greg');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (2, 'Wydawnictwo Siedmioróg');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (3, 'Ossolineum');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (4, 'Wolne Lektury');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (5, 'Armoryka');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (6, 'Świat Książki');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (7, 'Wydawnictwo SBM');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (8, 'IBIS');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (9, 'Wydawnictwo Albatros');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (10, 'Zysk i S-ka');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (11, 'Wydawnictwo Olesiejuk');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (12, 'Media Rodzina');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (13, 'Nowe Wydawnictwo Polskie');
INSERT INTO public.publishers (id_publisher, publisher_name) VALUES (14, 'Wydawnictwo MUZA S.A.');

-- Table: public.books

-- DROP TABLE IF EXISTS public.books;

CREATE TABLE IF NOT EXISTS public.books
(
    id_book integer NOT NULL,
    title character varying(255) COLLATE pg_catalog."default" NOT NULL,
    id_genre integer,
    id_publisher integer,
    cover character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT books_pkey PRIMARY KEY (id_book),
    CONSTRAINT books_genres_id_genre_fk FOREIGN KEY (id_genre)
        REFERENCES public.genres (id_genre) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE,
    CONSTRAINT books_publishers_id_publisher_fk FOREIGN KEY (id_publisher)
        REFERENCES public.publishers (id_publisher) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.books
    OWNER to docker;

INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (1, 'Chłopi', 1, 1, 'chlopi.jpg');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (4, 'Dziady, część IV', 3, 4, 'dziady-IV.jpg');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (8, 'Król Edyp', 4, 1, 'edyp.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (10, 'Ludzie bezdomni', 7, 1, 'ludzie-bezdomni.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (11, 'Nad Niemnem', 7, 7, 'nad-niemnem.jpg');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (16, 'Lalka', 6, 1, 'lalka.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (12, 'Cierpienia młodego Wertera', 2, 2, 'cierpienia-mlodego-wertera.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (14, 'Hamlet', 4, 5, 'hamlet.jpg');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (15, 'Kordian', 3, 1, 'kordian.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (13, 'Dziady, część III', 3, 3, 'dziady-III.jpg');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (6, 'Iliada', 5, 6, 'iliada.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (2, 'Wesele', 8, 8, 'wesele.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (3, 'Dublerka', 9, 9, 'dublerka.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (5, 'Władca Pierścieni. Bractwo pierścienia', 10, 10, 'bractwo-pierscienia.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (7, 'Mały książę', 11, 11, 'maly-ksiaze.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (9, 'Harry Potter i kamień filozoficzny', 12, 12, 'harry-potter-i-kamien-filozoficzny.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (17, 'Opowieści z Narnii: Lew, Czarownica i stara szafa', 10, 12, 'narnia.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (18, 'Wielki Gatsby', 12, 6, 'wielki-gatsby.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (19, 'Archipelag GUŁag', 12, 13, 'archipelag-gulag.jpg');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (20, 'Rok 1984', 13, 14, 'rok-1984.png');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (21, 'Pan Tadeusz', 5, 2, 'pan-tadeusz.jpg');
INSERT INTO public.books (id_book, title, id_genre, id_publisher, cover) VALUES (22, 'Romeo i Julia', 4, 2, 'romeo-i-julia.jpg');

-- Table: public.authors

-- DROP TABLE IF EXISTS public.authors;

CREATE TABLE IF NOT EXISTS public.authors
(
    id_author integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 23 MINVALUE 1 MAXVALUE 2147483647 CACHE 23 ),
    name character varying(100) COLLATE pg_catalog."default" NOT NULL,
    surname character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT authors_pkey PRIMARY KEY (id_author)
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.authors
    OWNER to docker;

INSERT INTO public.authors (id_author, name, surname) VALUES (1, 'Władysław', 'Reymont');
INSERT INTO public.authors (id_author, name, surname) VALUES (2, 'Johann Wolfgang', 'von Goethe');
INSERT INTO public.authors (id_author, name, surname) VALUES (3, 'Adam', 'Mickiewicz');
INSERT INTO public.authors (id_author, name, surname) VALUES (4, 'William', 'Shakespeare');
INSERT INTO public.authors (id_author, name, surname) VALUES (5, 'Homer', null);
INSERT INTO public.authors (id_author, name, surname) VALUES (6, 'Juliusz', 'Słowacki');
INSERT INTO public.authors (id_author, name, surname) VALUES (7, 'Sofokles', null);
INSERT INTO public.authors (id_author, name, surname) VALUES (8, 'Bolesław', 'Prus');
INSERT INTO public.authors (id_author, name, surname) VALUES (9, 'Stefan', 'Żeromski');
INSERT INTO public.authors (id_author, name, surname) VALUES (10, 'Eliza', 'Orzeszkowa');
INSERT INTO public.authors (id_author, name, surname) VALUES (11, 'Stanisław', 'Wyspiański');
INSERT INTO public.authors (id_author, name, surname) VALUES (12, 'B.A.', 'Paris');
INSERT INTO public.authors (id_author, name, surname) VALUES (13, 'Clare', 'Mackintosh');
INSERT INTO public.authors (id_author, name, surname) VALUES (14, 'Sophie', 'Hannah');
INSERT INTO public.authors (id_author, name, surname) VALUES (15, 'Holly', 'Brown');
INSERT INTO public.authors (id_author, name, surname) VALUES (16, 'J.R.R.', 'Tolkien');
INSERT INTO public.authors (id_author, name, surname) VALUES (17, 'Antoine', 'de Saint-Exupéry');
INSERT INTO public.authors (id_author, name, surname) VALUES (18, 'J. K.', 'Rowling');
INSERT INTO public.authors (id_author, name, surname) VALUES (19, 'C.S.', 'Lewis');
INSERT INTO public.authors (id_author, name, surname) VALUES (20, 'Francis Scott', 'Fitzgerald');
INSERT INTO public.authors (id_author, name, surname) VALUES (21, 'Aleksandr', 'Sołżenicyn');
INSERT INTO public.authors (id_author, name, surname) VALUES (22, 'George', 'Orwell');

-- Table: public.book_author

-- DROP TABLE IF EXISTS public.book_author;

CREATE TABLE IF NOT EXISTS public.book_author
(
    id_book_author integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 26 MINVALUE 1 MAXVALUE 2147483647 CACHE 26 ),
    id_book integer NOT NULL,
    id_author integer NOT NULL,
    CONSTRAINT book_author_pkey PRIMARY KEY (id_book_author),
    CONSTRAINT book_author_authors_id_author_fk FOREIGN KEY (id_author)
        REFERENCES public.authors (id_author) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE,
    CONSTRAINT book_author_books_id_book_fk FOREIGN KEY (id_book)
        REFERENCES public.books (id_book) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.book_author
    OWNER to docker;

INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (1, 1, 1);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (4, 4, 3);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (6, 6, 5);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (8, 8, 7);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (10, 10, 9);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (11, 11, 10);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (9, 16, 8);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (2, 12, 2);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (5, 14, 4);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (7, 15, 6);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (3, 13, 3);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (12, 3, 12);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (13, 3, 13);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (14, 3, 14);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (15, 3, 15);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (16, 2, 11);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (17, 5, 16);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (18, 7, 17);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (19, 9, 18);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (20, 17, 19);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (21, 18, 20);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (22, 19, 21);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (23, 20, 22);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (24, 21, 3);
INSERT INTO public.book_author (id_book_author, id_book, id_author) VALUES (25, 22, 4);

-- Table: public.users

-- DROP TABLE IF EXISTS public.users;

CREATE TABLE IF NOT EXISTS public.users
(
    id_user integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 3 MINVALUE 1 MAXVALUE 2147483647 CACHE 3 ),
    email character varying(255) COLLATE pg_catalog."default" NOT NULL,
    password character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT users_pk PRIMARY KEY (id_user),
    CONSTRAINT email_unique UNIQUE (email)
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.users
    OWNER to docker;

INSERT INTO public.users (id_user, email, password) VALUES (2, 'admin@admin.com', '$2y$10$ML6Nczp4QTV8Nm9vZwGaDOteDTrQbvN2Lpl0vleJsPWUvLJ.DMfZC');
INSERT INTO public.users (id_user, email, password) VALUES (1, 'user@user.com', '$2y$10$lRmjmXaTLloJJ0B9d2lbzulXoz2czA.94d7uISzSquzKszeFssJqG');

-- Table: public.roles

-- DROP TABLE IF EXISTS public.roles;

CREATE TABLE IF NOT EXISTS public.roles
(
    id_role integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 3 MINVALUE 1 MAXVALUE 2147483647 CACHE 3 ),
    role_name character varying(30) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT role_pkey PRIMARY KEY (id_role)
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.roles
    OWNER to docker;

INSERT INTO public.roles (id_role, role_name) VALUES (1, 'user');
INSERT INTO public.roles (id_role, role_name) VALUES (2, 'admin');

-- Table: public.user_role

-- DROP TABLE IF EXISTS public.user_role;

CREATE TABLE IF NOT EXISTS public.user_role
(
    id_user_role integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 4 MINVALUE 1 MAXVALUE 2147483647 CACHE 4 ),
    id_user integer NOT NULL,
    id_role integer NOT NULL,
    CONSTRAINT user_role_pkey PRIMARY KEY (id_user_role),
    CONSTRAINT user_role_roles_id_role_fk FOREIGN KEY (id_role)
        REFERENCES public.roles (id_role) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT user_role_users_id_user_fk FOREIGN KEY (id_user)
        REFERENCES public.users (id_user) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.user_role
    OWNER to docker;

INSERT INTO public.user_role (id_user_role, id_user, id_role) VALUES (1, 1, 1);
INSERT INTO public.user_role (id_user_role, id_user, id_role) VALUES (2, 2, 1);
INSERT INTO public.user_role (id_user_role, id_user, id_role) VALUES (3, 2, 2);

-- Table: public.reservations

-- DROP TABLE IF EXISTS public.reservations;

CREATE TABLE IF NOT EXISTS public.reservations
(
    id_borrowing integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    id_user integer NOT NULL,
    id_book integer NOT NULL,
    date_reserved timestamp without time zone NOT NULL,
    date_ended_reservation timestamp without time zone,
    CONSTRAINT borrowing_pkey PRIMARY KEY (id_borrowing),
    CONSTRAINT reservations_books_id_book_fk FOREIGN KEY (id_book)
        REFERENCES public.books (id_book) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT reservations_users_id_user_fk FOREIGN KEY (id_user)
        REFERENCES public.users (id_user) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

    TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.reservations
    OWNER to docker;

